<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <script src="webtorrent.min.js"></script>
</head>

<body>
    <div class="modal-body"></div>
    <script>
        // Use WebTorrent to handle the torrent
        const client = new WebTorrent();
        console.log("Loading torrent...");
        client.add("magnet:?xt=urn:btih:37DE3E6848E6E6C4409D86FCA5DC930663CDDF08&dn=Fast+and+Furious+6%3A+The+Game+%282013%29+%5B720p%5D+%5BYTS.MX%5D&tr=udp%3A%2F%2Ftracker.opentrackr.org%3A1337%2Fannounce&tr=udp%3A%2F%2Fopen.tracker.cl%3A1337%2Fannounce&tr=udp%3A%2F%2Fp4p.arenabg.com%3A1337%2Fannounce&tr=udp%3A%2F%2Ftracker.torrent.eu.org%3A451%2Fannounce&tr=udp%3A%2F%2Ftracker.dler.org%3A6969%2Fannounce&tr=udp%3A%2F%2Fopen.stealth.si%3A80%2Fannounce&tr=udp%3A%2F%2Fipv4.tracker.harry.lu%3A80%2Fannounce&tr=https%3A%2F%2Fopentracker.i2p.rocks%3A443%2Fannounce", function (torrent) {
            console.log("Torrent info:", torrent);

            const file = torrent.files.find((file) => file.name.endsWith(".mp4"));

            if (!file) {
                console.error("No MP4 file found in the torrent.");
                return;
            }

            console.log("File found:", file.name);

            // Create a video element
            const video = document.createElement("video");
            video.controls = true;

            // Add video source
            console.log("Creating video source...");
            const fileURL = URL.createObjectURL(file.createReadStream());
            console.log("File URL:", fileURL);
            video.src = fileURL;

            // Add the video to the modal body
            const modalBody = document.querySelector(".modal-body");
            modalBody.innerHTML = ""; // Clearing modal body
            modalBody.appendChild(video); // Appending video element

            // Listen for errors
            video.addEventListener("error", function (e) {
                console.error("Error loading video:", e);
            });

            // Listen for load event
            video.addEventListener("loadeddata", function () {
                console.log("Video loaded successfully.");
            });
        });
    </script>
</body>

</html>